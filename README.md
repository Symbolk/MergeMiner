# MergeMiner

#### A mining tool to collect merge scenarios from Git repositories. In three-way merging, each merge scenario contains the two versions to be merged (called ours and theirs respectively), and their nearest common ancestor in the commit history (called base).

> How to tell which version is ours and which is theirs?

See the following example:

```sh
$ git branch
      develop
    * master
$ git merge develop
$ git log
commit 5aa63defd7d552544348deaad88a22d212c43038 (HEAD -> master)
Merge: 011eeae bdd631b
Author: Symbolk <symbolk@163.com>
Date:   Sat Jul 6 17:12:25 2019 +0800

    Merge branch 'develop'

```

> The current branch `master` is called ours, on which the merge commit will be submitted. The branch `develop` in the `git-merge` command is called theirs, which will not be affected by the merging.

---

## Getting Started

## System requirements

- Windows/Linux/macOS
- Python 2.7.15
- Git 2.18.0

## Installation

Under the root directory of the cloned repository, run the following command:

```
pip install -r requirements.txt 
```

---

## Usage

- Usage1: Collect Java files involved in merge scenarios that contain merge conflict(s) from the whole commit history

### Input

A Git repository with the name of the target branch (usually `master`). 

### Output

1. A folder that contains sub-folders named with merge commit ids, which contains all collected files in each merge scenario.
2. A csv file that provides a statistical summary of each merge scenario, which consist of 4 commit ids (merge commit, HEAD of ours/theirs branch, base commit), the number of conflicting Java files and their paths, and the number of conflict blocks.

- Usage2: Collect Java files involved in merge scenarios that contain refactoring-related merge conflict(s) from the csv file generated by https://github.com/Symbolk/RefactoringsInMergeCommits (forked from https://github.com/ualberta-smr/RefactoringsInMergeCommits)


### Input
1. A Git repository with the name of the target branch (usually `master`).
2. The csv file that records refactoring-related merge commit ids, generated by RefactoringsInMergeCommits.

### Output

1. A folder that contains sub-folders named with merge commit ids, which contains all collected files in each merge scenario.
2. A csv file that provides a statistical summary of each merge scenario, which consist of 4 commit ids (merge commit, HEAD of ours/theirs branch, base commit), the number of conflicting Java files and their paths, and the number of conflict blocks.
